<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Content Critic</title>
  <link rel="stylesheet" type="text/css" href="sidepanel.css">
</head>
<body>
  <div class="header">
    <div class="header-left">Content Critic</div>
    <div class="header-right">
      <button id="resetTabBtn" class="header-button" title="Reset Tab State">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
        </svg>
        Reset Tab
      </button>
      <button id="apiKeyBtn" class="header-button" title="API Key">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 7h3a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-3m-6 0H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h3m0 0V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2M9 7h6"/>
        </svg>
        API Key
      </button>
      <button id="rawContentBtn" class="header-button" title="Raw Content">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"/>
        </svg>
        Raw Content
      </button>
      <button id="rawResponseBtn" class="header-button" title="Raw Response">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"/>
        </svg>
        Raw Response
      </button>
      <button id="analyzeBtn" class="header-button primary" title="Analyze Content">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
        Analyze
      </button>
    </div>
  </div>

  <div id="result"></div>

  <!-- API Key Modal -->
  <div id="apiKeyModal" class="modal-overlay api-key-modal">
    <div class="api-key-content">
      <div class="api-key-header">API Key Configuration</div>
      <input type="password" id="apiKey" class="api-key-input" placeholder="Enter your API key">
      <div id="apiKeyStatus" class="api-key-status">Not configured</div>
      <div class="api-key-actions">
        <button id="saveApiKeyBtn" class="header-button primary">Save</button>
        <button id="closeApiKeyBtn" class="header-button">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Raw Content Modal -->
  <div id="rawContentModal" class="modal-overlay raw-content-modal">
    <div class="raw-content-content">
      <div class="raw-content-header">
        <div class="raw-content-title">Raw Content</div>
        <div class="modal-actions">
          <button id="copyContentBtn" class="action-button">Copy Content</button>
          <button id="closeRawContentBtn" class="close-button">Ã—</button>
        </div>
      </div>
      <div id="rawContentTokenInfo" class="token-info"></div>
      <div id="rawContentText" class="raw-content-body"></div>
      <div id="rawContentEdit" class="raw-content-body" style="display: none;">
        <textarea id="rawContentTextarea" style="width: 100%; height: 100%; min-height: 200px; border: none; resize: vertical; font-family: monospace; font-size: 13px; line-height: 1.5;"></textarea>
        <div class="edit-actions">
          <button id="saveContentBtn" class="action-button">Save</button>
          <button id="cancelEditBtn" class="action-button">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Raw Response Modal -->
  <div id="rawResponseModal" class="modal-overlay raw-content-modal">
    <div class="raw-content-content">
      <div class="raw-content-header">
        <div class="raw-content-title">Raw LLM Response</div>
        <div id="rawResponseTokenInfo" class="token-info"></div>
      </div>
      <div id="rawResponseText" class="raw-content-body"></div>
      <div class="raw-content-actions">
        <button id="closeRawResponseBtn" class="header-button">Close</button>
      </div>
    </div>
  </div>

  <script src="simple-markdown.js"></script>
  <script src="sidepanel_js.js"></script>
</body>
</html>